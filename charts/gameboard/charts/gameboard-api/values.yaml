# Default values for gameboard-api.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: cmusei/gameboard-api
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /api
          pathType: ImplementationSpecific
        - path: /hub
          pathType: ImplementationSpecific
        - path: /img
          pathType: ImplementationSpecific
        - path: /docs
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

health: {}
  # livenessProbe:
  #   initialDelaySeconds: 10
  #   httpGet:
  #     path: /api/status
  #     port: http
  # startupProbe:
  #   initialDelaySeconds: 30
  #   httpGet:
  #     path: /api/status
  #     port: http
  #   failureThreshold: 9
  #   periodSeconds: 10

# storage - either an existing pvc, the size for a new pvc, or emptyDir
storage:
  existing: ""
  size: ""
  mode: ReadWriteOnce
  class: default

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 200m
  #   memory: 512Mi
  # requests:
  #   cpu: 100m
  #   memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

## existingSecret references a secret already in k8s.
## The key/value pairs in the secret are added as environment variables.
existingSecret: ""

# cacert - add custom CA certificate in-line
# cacert: |-
#   -----BEGIN CERTIFICATE-----
#   MIIDGDCCAgCgAwIBAgIUPO57TE7AQJRsMEtzii2SYwZ9TRIwDQYJKoZIhvcNAQEL
#   BQAwJDEiMCAGA1UEAxMZRm91bmRyeSBBcHBsaWFuY2UgUm9vdCBDQTAeFw0yMTAz
#   â€¦
#   -----END CERTIFICATE-----

# cacertSecret - Trust a custom CA certificate in an existing Secret
cacertSecret: ""
cacertSecretKey: ca.crt

# Config app settings with environment vars.
# Those most likely needing values are listed. For others,
# see https://github.com/cmu-sei/gameboard/blob/master/src/Gameboard.Api/appsettings.conf
env: {}
  ####################################################
  ## CORE (behavior)
  ####################################################
  ## (required) Use these to tell GB where the Game Engine and its docs/images are
  # Core__ChallengeDocUrl: http://localhost:5000/api
  # Core__GameEngineUrl: http://localhost:5000/api

  ## (optional) Configure various behaviors of Gameboard
  # Core__GameEngineDeployBatchSize: 6
  # Core__NameChangeIsEnabled: true
  # Core__NameChangeRequiresApproval: true
  # Core__PracticeDefaultSessionLength: 45
  # Core__PracticeMaxSessionLength: 480

  ## WARNING: these are legacy values that should not be set if you're using client credentials auth.
  ## These will be removed in a later release. If you're using API key based access to Topo or another
  ## game engine, you should instead create an OAuth client on your IdP and set the GameEngine__ClientId
  ## and GameEngine__ClientSecret settings below.
  # Core__GameEngineClientId: my-topo-user-for-gameboard
  # Core__GameEngineClientSecret: my-topo-user-for-gameboard-api-key

  #########################################
  ### DB
  #########################################
  ## (required)
  # Database__ConnectionString: Server=localhost;Port=5432;Database=gb_dev;User ID=youruser;Password=yourpw;
  #
  ## (optional): Seed a default user into the DB with Admin role
  # Database__AdminId: f56c167f-d3f4-484a-8ee9-d230ceb5f734
  # Database__AdminName: The GB Admin Person

  ####################################################
  ## GAME ENGINE (typically Topomojo)
  ####################################################
  ## (required): Use these settings to configure OAuth client credentials access to Topomojo/compatible game engine.
  ## NOTE: This client must have an OAuth audience matching Topomojo's Oidc_Audience setting, and if you're using
  ## this auth method, you SHOULD NOT SET Core__GameEngineClientId and Core__GameEngineClientSecret above.
  # GameEngine__ClientId: my-topo-client
  # GameEngine__ClientSecret: my-topo-client-secret

  ####################################################
  ## HTTP HEADERS
  ####################################################
  # Headers__LogHeaders: false
  # Headers__Cors__Origins__[0]: ""
  # Headers__Cors__Methods__[0]: ""
  # Headers__Cors__Headers__[0]: ""
  # Headers__Cors__AllowAnyOrigin: false
  # Headers__Cors__AllowAnyMethod: false
  # Headers__Cors__AllowAnyHeader: false
  # Headers__Cors__AllowCredentials: false
  # Headers__Forwarding__ForwardLimit: 1
  # Headers__Forwarding__TargetHeaders: None
  # Headers__Forwarding__KnownNetworks: 10.0.0.0/8 172.16.0.0/12 192.168.0.0/24 ::ffff:a00:0/104 ::ffff:b00a:0/108 ::ffff:c0d0:0/120
  # Headers__Forwarding__KnownProxies: ::1
  # Headers__Security__ContentSecurity: default-src 'self' 'unsafe-inline'; img-src data: 'self'
  # Headers__Security__XContentType: nosniff
  # Headers__Security__XFrame: SAMEORIGIN

  ####################################################
  ## LOGGING
  ####################################################
  # Logging__MinimumLogLevel: Information

  #########################################
  ### OAUTH
  #########################################
  # Oidc__Audience: gameboard-api
  # Oidc__Authority: http://localhost:8080/realms/foundry
  # Oidc__DefaultUserNameInferFromEmail: false
  # Oidc__StoreUserEmails: false

## giturl is the url of the git repository of static markdown
giturl: ""
## gitbranch sets which repo branch to publish
gitbranch: ""
## pollInterval sets minutes between git pull
pollInterval: 5
